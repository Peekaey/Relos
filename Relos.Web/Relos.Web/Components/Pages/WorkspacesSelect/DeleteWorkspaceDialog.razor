@using System.ComponentModel.DataAnnotations
@using Radzen
@using Radzen.Blazor
@using Relos.Models.RequestDtos
@inject DialogService DialogService
@rendermode InteractiveServer

<RadzenStack Gap="1.5rem">
    <RadzenAlert AlertStyle="AlertStyle.Warning" Variant="Variant.Flat" Shade="Shade.Lighter">
        <RadzenStack Gap="0.5rem">
            <RadzenText TextStyle="TextStyle.Body1">
                Are you sure you want to delete the workspace <strong>"@WorkspaceName"</strong>?
            </RadzenText>
            <RadzenText TextStyle="TextStyle.Body2" Class="rz-color-danger-darker">
                This action cannot be undone. All data associated with this workspace will be permanently removed.
            </RadzenText>
        </RadzenStack>
    </RadzenAlert>

    <RadzenStack Orientation="Orientation.Horizontal"
                 JustifyContent="JustifyContent.End"
                 Gap="0.5rem">
        <RadzenButton Text="Cancel"
                      ButtonStyle="ButtonStyle.Light"
                      Click="@Cancel" />
        <RadzenButton Text="Delete Workspace"
                      ButtonStyle="ButtonStyle.Danger"
                      Icon="delete"
                      Click="@Submit" />
    </RadzenStack>
</RadzenStack>

@code {
    [Parameter] public string WorkspaceName { get; set; } = string.Empty;
    [Parameter] public int WorkspaceId { get; set; }

    private void Cancel()
    {
        DialogService.Close(false);
    }

    private void Submit()
    {
        var request = new DeleteWorkspaceRequest
        {
            WorkspaceId = WorkspaceId,
            WorkspaceName = WorkspaceName.Trim()
        };

        DialogService.Close(request);
    }
    
}