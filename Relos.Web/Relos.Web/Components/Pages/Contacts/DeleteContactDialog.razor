@using System.ComponentModel.DataAnnotations
@using Radzen
@using Radzen.Blazor
@using Relos.Models.RequestDtos
@inject DialogService DialogService
@rendermode InteractiveServer

<RadzenStack Gap="1.5rem">
    <RadzenAlert AlertStyle="AlertStyle.Warning" Variant="Variant.Flat" Shade="Shade.Lighter">
        <RadzenStack Gap="0.5rem">
            @if (CompanyName != null)
            {
                <RadzenText TextStyle="TextStyle.Body1">
                    Are you sure you want to delete the contact <strong>"@ContactName"</strong> from <strong>"@CompanyName"</strong>?
                </RadzenText>
            }
            else
            {
                <RadzenText TextStyle="TextStyle.Body1">
                    Are you sure you want to delete the contact <strong>"@ContactName"</strong>?
                </RadzenText>
            }
            <RadzenText TextStyle="TextStyle.Body2" Class="rz-color-danger-darker">
                This action cannot be undone. All data associated with this client will be permanently removed.
            </RadzenText>
        </RadzenStack>
    </RadzenAlert>

    <RadzenStack Orientation="Orientation.Horizontal"
                 JustifyContent="JustifyContent.End"
                 Gap="0.5rem">
        <RadzenButton Text="Cancel"
                      ButtonStyle="ButtonStyle.Light"
                      Click="@Cancel" />
        <RadzenButton Text="Delete Contact"
                      ButtonStyle="ButtonStyle.Danger"
                      Icon="delete"
                      Click="@Submit" />
    </RadzenStack>
</RadzenStack>


@code {
    [Parameter] 
    public string ContactName { get; set; }
    [Parameter]
    public string? CompanyName { get; set; }
    [Parameter]
    public int ContactId { get; set; }

    private void Cancel()
    {
        DialogService.Close(false);
    }
    
    private void Submit()
    {
        var result = new DeleteContactRequest
        {
            ContactId = ContactId,
            ContactName = ContactName
        };
        DialogService.Close(result);
    }
    
    
    
    
}